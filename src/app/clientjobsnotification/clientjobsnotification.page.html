<ion-header>
  <ion-toolbar color="primary">
    <ion-title>Errand Applicants</ion-title>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="clientjobs"></ion-back-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="C">
  <ion-card class="available-job-card">
    <ion-card-header>
      <ion-card-title>Errand Details</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-grid>
        <ion-row>
          <ion-col size="3">
            <ion-label>
              Errand Name: <p>{{job?.errandname}}</p>
            </ion-label>
          </ion-col>
          <ion-col>
            <ion-label>
              Errand Date: <p>{{job?.date | date:'d MMM yyyy'}}</p>
            </ion-label>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col size="3">
            <ion-label>
              Errand Category: <p>{{job?.category}}</p>
            </ion-label>
          </ion-col>
          <ion-col>
            <ion-label>
              Errand Description: <p>{{job?.description}}</p>
            </ion-label>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col size="3">
            <ion-label>
              Reporting Time: <p>{{job?.time | date:'shortTime'}}</p>
            </ion-label>
          </ion-col>
          <ion-col>
            <ion-label>
              End Time: <p>{{job?.endtime | date:'shortTime' }}</p>
            </ion-label>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col>
            <ion-button size="default" expand="block" color="tertiary" (click)="DeleteErrand(job)">Delete Errand</ion-button>
          </ion-col>
        </ion-row>
        <ion-row *ngIf="appear == true">
          <ion-col>
            <ion-button size="default" expand="block" color="tertiary" (click)="changedate()">Change Errand Date</ion-button>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-card-content>
  </ion-card>

  <ion-card class="available-job-card">
    <ion-card-header>
      <ion-card-title>List of Applicants</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <div id="container" *ngIf="jobapplicants?.length===0">
        <p class="center">There are currently no applicants for this errand</p>
      </div>
      <ion-grid>
        <ion-row>
          <ion-col size-md="6" size-sm *ngFor="let applicant of jobapplicants">
            <ion-card class="applicant-card">
              <ion-card-header>
                <ion-card-title>Applicant Details:
                  <p>
                    <ion-button color="secondary" class="profilebtn" (click)="toERProfile(applicant.id)">Profile
                    </ion-button>
                  </p>
                </ion-card-title>
              </ion-card-header>
              <ion-card-content>
                <ion-card class="applicant-child-card">
                  <ion-row>
                    <ion-label>
                      Applicant: {{applicant.id}}
                    </ion-label>
                  </ion-row>
                  <ion-row>
                    <ion-label>
                      Date Applied: {{applicant.date | date:'d MMM yyyy'}}
                    </ion-label>
                  </ion-row>
                </ion-card>
                <div class="ion-text-end">
                  <ion-button color="success" class="acceptbtn" (click)="AcceptApplicant(applicant)">Accept</ion-button>
                  <ion-button color="danger" class="rejectbtn" (click)="RejectApplicant(applicant)">Reject</ion-button>
                </div>
              </ion-card-content>
            </ion-card>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-card-content>
  </ion-card>
</ion-content>